<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WellSense AI â€“ Student Wellness Demo</title>

  <!-- Google Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
      color: #e0e7ff;
      overflow-x: hidden;
      background: #0a0f2b;
      position: relative;
    }

    .particle, .ai-icon {
      position: absolute;
      border-radius: 50%;
      opacity: 0.7;
      pointer-events: none;
    }

    .particle {
      width: 6px;
      height: 6px;
      background: #8b5cf6;
      animation: float 10s linear infinite;
    }

    @keyframes float {
      0% { transform: translateY(100vh) translateX(0); opacity: 0.5; }
      50% { opacity: 1; }
      100% { transform: translateY(-10vh) translateX(50px); opacity: 0; }
    }

    .ai-icon {
      font-size: 30px;
      color: #a78bfa;
      opacity: 0.6;
      animation: floatIcon 15s linear infinite;
    }

    @keyframes floatIcon {
      0% { transform: translateY(100vh) rotate(0deg); }
      50% { transform: translateY(50vh) rotate(180deg); }
      100% { transform: translateY(-10vh) rotate(360deg); }
    }

    header {
      background: rgba(79,70,229,0.95);
      color: white;
      padding: 30px 20px;
      text-align: center;
      border-bottom: 3px solid #6366f1;
      box-shadow: 0 4px 15px rgba(79,70,229,0.6);
      animation: glow 2s infinite alternate;
      position: relative;
      z-index: 10;
    }

    @keyframes glow {
      0% { box-shadow: 0 4px 15px rgba(79,70,229,0.6); }
      100% { box-shadow: 0 4px 25px rgba(79,70,229,1); }
    }

    main {
      padding: 5vw;
      max-width: 900px;
      margin: auto;
      position: relative;
      z-index: 10;
    }

    .card {
      background: rgba(10,15,43,0.9);
      border: 2px solid #4f46e5;
      border-radius: 16px;
      padding: 22px;
      margin-bottom: 24px;
      box-shadow: 0 10px 20px rgba(79,70,229,0.5);
      position: relative;
      color: #e0e7ff;
      transition: 0.3s;
      width: 100%;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    .card:hover {
      box-shadow: 0 10px 30px rgba(79,70,229,0.9), 0 0 15px rgba(79,70,229,0.7);
      border-color: #8b5cf6;
      transform: translateY(-3px);
    }

    .card::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      width: 6px;
      height: 100%;
      background: linear-gradient(180deg, #4f46e5, #8b5cf6);
    }

    h2 { display: flex; align-items: center; gap: 8px; font-size: 1.1rem; }
    button { background: #4f46e5; color: white; border: 2px solid #6366f1; padding: 12px 18px; border-radius: 10px; cursor: pointer; font-size: 16px; transition: 0.3s; margin-top: 8px; box-shadow: 0 4px 10px rgba(79,70,229,0.4); width: 100%; max-width: 250px; }
    button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(79,70,229,0.8); }
    button:disabled { background: #9ca3af; border-color: #6b7280; }
    .result { margin-top: 15px; font-size: 18px; font-weight: bold; color: #e0e7ff; white-space: pre-line; text-shadow: 0 0 5px #8b5cf6; }
    input { padding: 8px; border-radius: 6px; border: 1px solid #6366f1; margin-bottom: 10px; background: rgba(15,23,42,0.9); color: #e0e7ff; width: 100%; box-sizing: border-box; }
    video { width: 90%; max-width: 340px; height: auto; border-radius: 12px; border: 2px solid #6366f1; margin-top: 10px; box-shadow: 0 0 15px #8b5cf6; display: block; margin-left: auto; margin-right: auto; }
    #qrcode { width: 90%; max-width: 180px; height: 180px; display: flex; justify-content: center; align-items: center; margin: 10px auto; background: rgba(15,23,42,0.9); border: 2px solid #4f46e5; box-shadow: 0 0 25px #8b5cf6, 0 0 15px #4f46e5; border-radius: 12px; }

    footer { text-align: center; font-size: 14px; padding: 18px; color: #e0e7ff; border-top: 3px solid #4f46e5; box-shadow: 0 -4px 15px rgba(79,70,229,0.5); position: relative; z-index: 10; }

    @media(max-width: 600px){
      h2 { font-size: 1rem; }
      button { max-width: 100%; }
      input { font-size: 0.9rem; }
    }
  </style>
</head>
<body>

<header>
  <h1>WellSense AI</h1>
  <p>ðŸ§  Realistic AI-Powered Student Wellness & Preventive Healthcare</p>
</header>

<main>
  <!-- User Info -->
  <div class="card">
    <span class="badge">User Info</span>
    <h2><span class="material-icons">person</span> Enter Details (Mandatory)</h2>
    <input type="text" id="name" placeholder="Enter Name" />
    <input type="number" id="age" placeholder="Enter Age" min="1" max="120" />
  </div>

  <!-- Voice Stress -->
  <div class="card">
    <span class="badge">AI + Voice</span>
    <h2><span class="material-icons">mic</span> Voice-Based Stress Check</h2>
    <p>Speak naturally for 10 seconds. The AI analyses tone, speed, and stress indicators.</p>
    <button id="startBtn">Start Voice Analysis</button>
    <div class="result" id="voiceResult"></div>
  </div>

  <!-- Camera -->
  <div class="card">
    <span class="badge">AI + Camera</span>
    <h2><span class="material-icons">videocam</span> Breathing & Posture Awareness</h2>
    <video id="video" autoplay muted></video><br>
    <button id="camBtn">Start Camera Check</button>
    <div class="result" id="camResult"></div>
  </div>

  <!-- QR Code -->
  <div class="card">
    <span class="badge">Interactive QR</span>
    <h2><span class="material-icons">qr_code</span> Scan to Try Yourself</h2>
    <p style="font-size:14px;opacity:0.85">Recommended secure URL (HTTPS): <b>https://wellsense-ai-demo.netlify.app</b></p>
    <button id="qrBtn">Generate QR Code</button>
    <div id="qrcode"></div>
  </div>

  <!-- Health Report -->
  <div class="card">
    <span class="badge">AI + Report</span>
    <h2><span class="material-icons">insert_chart</span> Health Report</h2>
    <button id="reportBtn">Generate Report</button>
    <button id="shareBtn">Share via WhatsApp/Email</button>
    <div class="result" id="reportResult"></div>
  </div>

  <!-- Live Data Summary -->
  <div class="card">
    <span class="badge">Data Summary</span>
    <h2><span class="material-icons">dashboard</span> Live Visitor Data</h2>
    <pre id="liveData" class="result">No data yet.</pre>
  </div>

  <!-- Disclaimer -->
  <div class="card">
    <span class="badge">Ethical AI</span>
    <h2><span class="material-icons">health_and_safety</span> Disclaimer</h2>
    <p>Educational demo only. No diagnosis. No audio or video is stored.</p>
  </div>
</main>

<footer>
  AI Carnival Project â€¢ School: SUNBEAM VARUNA, VARANASI â€¢ Team: SHOWCASE ARENA â€¢ Privacy-First â€¢ No Login
</footer>

<script>
  const startBtn = document.getElementById('startBtn');
  const voiceResult = document.getElementById('voiceResult');
  const camBtn = document.getElementById('camBtn');
  const camResult = document.getElementById('camResult');
  const reportBtn = document.getElementById('reportBtn');
  const reportResult = document.getElementById('reportResult');
  const shareBtn = document.getElementById('shareBtn');
  const video = document.getElementById('video');
  const qrBtn = document.getElementById('qrBtn');
  const qrDiv = document.getElementById('qrcode');
  const liveData = document.getElementById('liveData');

  let visitorData = [];
  const icons = ['â¤ï¸','ðŸ’“','ðŸ©º','ðŸ’Š','ðŸ§¬'];

  function sanitizeInput(str) {
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
  }

  function validateUser() {
    const name = document.getElementById('name').value.trim();
    const age = document.getElementById('age').value.trim();
    if(!name || !age) {
      alert('Please enter both Name and Age before proceeding.');
      return false;
    }
    return true;
  }

  function updateLiveData() {
    liveData.textContent = visitorData.map((v, i) => 
      `Visitor ${i+1}:\nSchool: SUNBEAM VARUNA, VARANASI\nTeam: SHOWCASE ARENA\nName: ${v.name}\nAge: ${v.age}\nStress Level: ${v.stress}\nPosture/Breathing: ${v.posture}`
    ).join('\n\n');
  }

  startBtn.onclick = async () => {
    if(!validateUser()) return;
    startBtn.disabled = true;
    voiceResult.textContent = 'Listeningâ€¦';
    let gotPermission = false;
    try {
      await navigator.mediaDevices.getUserMedia({ audio: true });
      gotPermission = true;
    } catch (e) {
      voiceResult.textContent = 'Microphone permission denied. Showing demo result.';
    }
    setTimeout(() => {
      const stress = gotPermission ? 'Voice captured â€¢ Normal Stress ðŸ˜Š' : 'Demo Mode â€¢ Normal Stress ðŸ˜Š';
      voiceResult.textContent = stress;
      startBtn.disabled = false;
      visitorData.push({
        name: sanitizeInput(document.getElementById('name').value),
        age: sanitizeInput(document.getElementById('age').value),
        stress: stress,
        posture: camResult.textContent || 'Not checked'
      });
      updateLiveData();
    }, 2500);
  };

  camBtn.onclick = async () => {
    if(!validateUser()) return;
    camBtn.disabled = true;
    camResult.textContent = 'Analysing postureâ€¦';
    let stream;
    try {
      stream = await navigator.mediaDevices.getUserMedia({ video: true });
      video.srcObject = stream;
    } catch (e) {
      camResult.textContent = 'Camera permission denied. Showing demo result.';
    }
    setTimeout(() => {
      const result = stream ? 'Posture looks stable ðŸ‘' : 'Demo Mode â€¢ Posture OK ðŸ‘';
      camResult.textContent = result;
      camBtn.disabled = false;
      if(stream) stream.getTracks().forEach(t => t.stop());
    }, 3000);
  };

  reportBtn.onclick = () => {
    if(!validateUser()) return;
    const latest = visitorData[visitorData.length-1];
    if(!latest) return alert('Perform checks first.');
    reportResult.textContent = 
      `=== Wellness Report ===\nSchool: SUNBEAM VARUNA, VARANASI\nTeam: SHOWCASE ARENA\nName: ${latest.name}\nAge: ${latest.age}\nStress Level: ${latest.stress}\nPosture/Breathing: ${latest.posture}`;
  };

  shareBtn.onclick = () => {
    const text = encodeURIComponent(reportResult.textContent);
    const whatsappURL = `https://api.whatsapp.com/send?text=${text}`;
    const mailtoURL = `mailto:?subject=Wellness Report&body=${text}`;
    window.open(whatsappURL, '_blank', 'noopener,noreferrer');
    window.open(mailtoURL, '_blank', 'noopener,noreferrer');
  };

  qrBtn.onclick = () => {
    const demoURL = window.location.origin + window.location.pathname;
    qrDiv.innerHTML = '';
    QRCode.toCanvas(document.createElement('canvas'), demoURL, { width: 180 }, function (error, canvas) {
      if (error) {
        qrDiv.textContent = 'QR generation failed.';
        return;
      }
      qrDiv.appendChild(canvas);
    });
  };

  for (let i = 0; i < 50; i++) {
    const p = document.createElement('div');
    p.classList.add('particle');
    p.style.left = Math.random() * 100 + 'vw';
    p.style.animationDuration = 5 + Math.random() * 10 + 's';
    document.body.appendChild(p);
  }

  for (let i = 0; i < 30; i++) {
    const icon = document.createElement('div');
    icon.classList.add('ai-icon');
    icon.style.left = Math.random() * 100 + 'vw';
    icon.style.top = Math.random() * 100 + 'vh';
    icon.style.fontSize = (20 + Math.random() * 20) + 'px';
    icon.style.color = `hsl(${Math.random()*360}, 70%, 70%)`;
    icon.style.animationDuration = (10 + Math.random()*10) + 's';
    icon.textContent = icons[Math.floor(Math.random() * icons.length)];
    document.body.appendChild(icon);
  }
</script>

</body>
</html>
